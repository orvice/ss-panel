version: '2'

services:
  redis:
    restart: always
    image: redis:latest
    ports:
        - 6379:6379
    container_name: sspanel_redis
    command:
    - --loglevel warning
    volumes:
      - ./redis_data:/var/lib/redis:Z

  mysql:
      restart: always
      image: mysql
      container_name: sspanel_mysql
      environment:
        - MYSQL_ROOT_PASSWORD=sspanel
        - MYSQL_DATABASE=sspanel
        - MYSQL_USER=sspanel
        - MYSQL_PASSWORD=sspanel
      volumes:
        - ./mysql_data:/var/lib/mysql:Z

  ss-panel:
      restart: always
      image: orvice/ss-panel:master
      ports:
        - 8080:80
      container_name: ss-panel
      depends_on:
        - mysql
        - redis
      environment:
        - MIGRATION=true
        - ADMIN_EMAIL=
        - ADMIN_PASS=

        - APP_LANG=en

        - AUTH_SALT=
        - AUTH_PASSWORD_ENCRYPTION_TYPE=bcrypt

        - DB_HOST=mysql
        - DB_DATABASE=sspanel
        - DB_USERNAME=root
        - DB_PASSWORD=sspanel

        - REDIS_HOST=redis
